!function(t){var i=function(t,i,n){this.x=t,this.y=i,this.id=n};i.prototype.distanceTo=function(t){var i=t.x-this.x,n=t.y-this.y;return Math.sqrt(i*i+n*n)},i.prototype.clone=function(){return new i(this.x,this.y,this.id)},i.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},i.prototype.subtract=function(t){return this.x-=t.x,this.y-=t.y,this},i.prototype.multiply=function(t){return this.x*=t,this.y*=t,this},i.prototype.divide=function(t){return this.x/=t,this.y/=t,this},i.prototype._add=function(t){return this.clone().add(t)},i.prototype._subtract=function(t){return this.clone().subtract(t)},i.prototype._multiply=function(t){return this.clone().multiply(t)},i.prototype._divide=function(t){return this.clone().divide(t)};var n=function(t,n){this.resolution=32,this.name=t,this.originalPoints=n.slice(0),this.points=[];for(var o=0;o<n.length;o++)for(var s=0;s<n[o].length;s++)this.points.push(new i(n[o][s][0],n[o][s][1],o));this.points=this.resample(),this.points=this.scale(),this.points=this.translateTo(new i(0,0,0))};n.prototype.resample=function(){for(var t=this.points,n=this.pathLength()/(this.resolution-1),o=0,s=new Array(t[0]),e=1;e<t.length;e++)if(t[e].id==t[e-1].id){var r=t[e-1].distanceTo(t[e]);if(o+r>=n){var h=t[e-1].x+(n-o)/r*(t[e].x-t[e-1].x),p=t[e-1].y+(n-o)/r*(t[e].y-t[e-1].y),u=new i(h,p,t[e].id);s[s.length]=u,t.splice(e,0,u),o=0}else o+=r}return s.length==this.resolution-1&&(s[s.length]=new i(t[t.length-1].x,t[t.length-1].y,t[t.length-1].id)),s},n.prototype.pathLength=function(){for(var t=0,i=1;i<this.points.length;i++)this.points[i].id==this.points[i-1].id&&(t+=this.points[i-1].distanceTo(this.points[i]));return t},n.prototype.scale=function(){for(var t=[],n=new i(+1/0,+1/0,0),o=new i(-1/0,-1/0,0),s=0;s<this.points.length;s++)n.x=Math.min(n.x,this.points[s].x),n.y=Math.min(n.y,this.points[s].y),o.x=Math.max(o.x,this.points[s].x),o.y=Math.max(o.y,this.points[s].y);for(var e=Math.max(o.x-n.x,o.y-n.y),s=0;s<this.points.length;s++)t.push(this.points[s]._subtract(n).divide(e));return t},n.prototype.translateTo=function(t){for(var i=[],n=this.centroid(),o=t._subtract(n),s=0,e=this.points.length;e>s;s++)i.push(this.points[s]._add(o));return i},n.prototype.centroid=function(){for(var t=new i(0,0,0),n=0;n<this.points.length;n++)t.x+=this.points[n].x,t.y+=this.points[n].y;return t.x/=this.points.length,t.y/=this.points.length,t},n.prototype.distanceTo=function(t,i){var n,o,s,e,r,h=0,p=this.points.length,u=i,a=[],l=-1,c=+1/0;for(o=0;p>o;o++)a[o]=!1;do{for(l=-1,c=+1/0,n=0,s=a.length;s>n;n++)a[n]||(r=this.points[u].distanceTo(t.points[n]),c>r&&(c=r,l=n));a[l]=!0,e=1-(u-i+p)%p/p,h+=e*c,u=(u+1)%p}while(u!=i);return h};var o=function(){this.pointClouds=[],this.listeners={},this.registerEvents(document)};o.prototype.registerEvents=function(t){var i=!1,n=[],o=0,s=this;t.addEventListener("mousedown",function(){i=!0,n=[],o++}),t.addEventListener("mousemove",function(t){i&&n.push([t.offsetX,t.offsetY])}),t.addEventListener("mouseup",function(){i=!1,s.recognize([n])})},o.prototype.on=function(t,i){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(i)},o.prototype.recognize=function(t){if(!(t[0].length<=1)){for(var i=new n("user",t),o=+1/0,s=-1,e=0;e<this.pointClouds.length;e++){var r=this.greedyCloudMatch(i,this.pointClouds[e]);o>r&&(o=r,s=e)}var h=this.pointClouds[s].name,p=Math.max((o-2)/-2,0);if(0>=p)return!1;if(this.listeners[h])for(var e=0;e<this.listeners[h].length;e++)this.listeners[h][e](p)}},o.prototype.add=function(t,i){this.pointClouds.push(new n(t,i))},o.prototype.greedyCloudMatch=function(t,i){var n,o,s,e=t.points.length,r=Math.floor(Math.pow(e,.5)),h=+1/0;for(n=0;e>n;n+=r)o=t.distanceTo(i,n),s=i.distanceTo(t,n),h=Math.min(h,Math.min(o,s));return h},o.prototype.config=function(t){for(option in t);},t.Symbol=new o}(window);